var Kn=Object.defineProperty;var Xn=(e,t,n)=>t in e?Kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var x=(e,t,n)=>Xn(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function Q(){}function gn(e){return e()}function Qt(){return Object.create(null)}function ve(e){e.forEach(gn)}function wn(e){return typeof e=="function"}function mn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Zn(e){return Object.keys(e).length===0}function v(e,t){e.appendChild(t)}function C(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode&&e.parentNode.removeChild(e)}function _(e){return document.createElement(e)}function oe(e){return document.createTextNode(e)}function M(){return oe(" ")}function Ne(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function T(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Jn(e){return Array.from(e.childNodes)}function we(e,t){t=""+t,e.data!==t&&(e.data=t)}function Yn(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Ie;function Ue(e){Ie=e}function Wn(){if(!Ie)throw new Error("Function called outside component initialization");return Ie}function Qn(){const e=Wn();return(t,n,{cancelable:r=!1}={})=>{const o=e.$$.callbacks[t];if(o){const i=Yn(t,n,{cancelable:r});return o.slice().forEach(s=>{s.call(e,i)}),!i.defaultPrevented}return!0}}const me=[],en=[];let be=[];const tn=[],er=Promise.resolve();let mt=!1;function tr(){mt||(mt=!0,er.then(bn))}function bt(e){be.push(e)}const pt=new Set;let ge=0;function bn(){if(ge!==0)return;const e=Ie;do{try{for(;ge<me.length;){const t=me[ge];ge++,Ue(t),nr(t.$$)}}catch(t){throw me.length=0,ge=0,t}for(Ue(null),me.length=0,ge=0;en.length;)en.pop()();for(let t=0;t<be.length;t+=1){const n=be[t];pt.has(n)||(pt.add(n),n())}be.length=0}while(me.length);for(;tn.length;)tn.pop()();mt=!1,pt.clear(),Ue(e)}function nr(e){if(e.fragment!==null){e.update(),ve(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(bt)}}function rr(e){const t=[],n=[];be.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),be=t}const qe=new Set;let ce;function xn(){ce={r:0,c:[],p:ce}}function _n(){ce.r||ve(ce.c),ce=ce.p}function ue(e,t){e&&e.i&&(qe.delete(e),e.i(t))}function xe(e,t,n,r){if(e&&e.o){if(qe.has(e))return;qe.add(e),ce.c.push(()=>{qe.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function vn(e){e&&e.c()}function Ut(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),bt(()=>{const i=e.$$.on_mount.map(gn).filter(wn);e.$$.on_destroy?e.$$.on_destroy.push(...i):ve(i),e.$$.on_mount=[]}),o.forEach(bt)}function Tt(e,t){const n=e.$$;n.fragment!==null&&(rr(n.after_update),ve(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function or(e,t){e.$$.dirty[0]===-1&&(me.push(e),tr(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function En(e,t,n,r,o,i,s=null,c=[-1]){const d=Ie;Ue(e);const l=e.$$={fragment:null,ctx:[],props:i,update:Q,not_equal:o,bound:Qt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:Qt(),dirty:c,skip_bound:!1,root:t.target||d.$$.root};s&&s(l.root);let h=!1;if(l.ctx=n?n(e,t.props||{},(f,g,...B)=>{const p=B.length?B[0]:g;return l.ctx&&o(l.ctx[f],l.ctx[f]=p)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](p),h&&or(e,f)),g}):[],l.update(),h=!0,ve(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=Jn(t.target);l.fragment&&l.fragment.l(f),f.forEach(k)}else l.fragment&&l.fragment.c();t.intro&&ue(e.$$.fragment),Ut(e,t.target,t.anchor),bn()}Ue(d)}class kn{constructor(){x(this,"$$");x(this,"$$set")}$destroy(){Tt(this,1),this.$destroy=Q}$on(t,n){if(!wn(n))return Q;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!Zn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ir="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ir);function sr(e){let t,n,r,o,i;return{c(){t=_("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon svelte-1d9h757" aria-hidden="true" focusable="false" fill="currentColor"><path d="M246.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 109.3 192 320c0 17.7 14.3 32 32 32s32-14.3 32-32l0-210.7 73.4 73.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-128-128zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-64z"></path></svg>',n=M(),r=_("input"),T(t,"id","drop-zone"),T(t,"class","svelte-1d9h757"),T(r,"id","file-input"),T(r,"type","file"),T(r,"class","svelte-1d9h757")},m(s,c){C(s,t,c),C(s,n,c),C(s,r,c),o||(i=[Ne(t,"click",cr),Ne(t,"drop",e[0]),Ne(t,"dragover",ur),Ne(r,"change",e[1])],o=!0)},p:Q,i:Q,o:Q,d(s){s&&(k(t),k(n),k(r)),o=!1,ve(i)}}}function cr(){document.getElementById("file-input").click()}function ur(e){e.preventDefault()}function ar(e){const t=Qn();function n(i){i.preventDefault(),i.dataTransfer.items.length===1&&o(i.dataTransfer.items[0].getAsFile())}function r(i){i.target.files.length===1&&o(i.target.files[0])}function o(i){t("fileUpload",{file:i})}return[n,r]}class An extends kn{constructor(t){super(),En(this,t,ar,sr,mn,{})}}const fr=["string","number","bigint","symbol"],lr=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function dr(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const t=typeof e;if(fr.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(hr(e))return"Buffer";const n=pr(e);return n||"Object"}function hr(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function pr(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(lr.includes(t))return t}class u{constructor(t,n,r){this.major=t,this.majorEncoded=t<<5,this.name=n,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}u.uint=new u(0,"uint",!0);u.negint=new u(1,"negint",!0);u.bytes=new u(2,"bytes",!0);u.string=new u(3,"string",!0);u.array=new u(4,"array",!1);u.map=new u(5,"map",!1);u.tag=new u(6,"tag",!1);u.float=new u(7,"float",!0);u.false=new u(7,"false",!0);u.true=new u(7,"true",!0);u.null=new u(7,"null",!0);u.undefined=new u(7,"undefined",!0);u.break=new u(7,"break",!0);class y{constructor(t,n,r){this.type=t,this.value=n,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Ee=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",yr=new TextDecoder,gr=new TextEncoder;function Xe(e){return Ee&&globalThis.Buffer.isBuffer(e)}function Sn(e){return e instanceof Uint8Array?Xe(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const wr=Ee?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):rn(e,t,n):(e,t,n)=>n-t>64?yr.decode(e.subarray(t,n)):rn(e,t,n),mr=Ee?e=>e.length>64?globalThis.Buffer.from(e):nn(e):e=>e.length>64?gr.encode(e):nn(e),W=e=>Uint8Array.from(e),It=Ee?(e,t,n)=>Xe(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),br=Ee?(e,t)=>(e=e.map(n=>n instanceof Uint8Array?n:globalThis.Buffer.from(n)),Sn(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},xr=Ee?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function _r(e,t){if(Xe(e)&&Xe(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}function nn(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t}function rn(e,t,n){const r=[];for(;t<n;){const o=e[t];let i=null,s=o>239?4:o>223?3:o>191?2:1;if(t+s<=n){let c,d,l,h;switch(s){case 1:o<128&&(i=o);break;case 2:c=e[t+1],(c&192)===128&&(h=(o&31)<<6|c&63,h>127&&(i=h));break;case 3:c=e[t+1],d=e[t+2],(c&192)===128&&(d&192)===128&&(h=(o&15)<<12|(c&63)<<6|d&63,h>2047&&(h<55296||h>57343)&&(i=h));break;case 4:c=e[t+1],d=e[t+2],l=e[t+3],(c&192)===128&&(d&192)===128&&(l&192)===128&&(h=(o&15)<<18|(c&63)<<12|(d&63)<<6|l&63,h>65535&&h<1114112&&(i=h))}}i===null?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),t+=s}return vr(r)}const on=4096;function vr(e){const t=e.length;if(t<=on)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=on));return n}const Er=256;class Cn{constructor(t=Er){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let n=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const o=n.length-(this.maxCursor-this.cursor)-1;n.set(t,o)}else{if(n){const o=n.length-(this.maxCursor-this.cursor)-1;o<n.length&&(this.chunks[this.chunks.length-1]=n.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(n=xr(this.chunkSize),this.chunks.push(n),this.maxCursor+=n.length,this._initReuseChunk===null&&(this._initReuseChunk=n),n.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let n;if(this.chunks.length===1){const r=this.chunks[0];t&&this.cursor>r.length/2?(n=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):n=It(r,0,this.cursor)}else n=br(this.chunks,this.cursor);return t&&this.reset(),n}}const m="CBOR decode error:",Bn="CBOR encode error:";function ke(e,t,n){if(e.length-t<n)throw new Error(`${m} not enough data for type`)}const D=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ae(e,t,n){ke(e,t,1);const r=e[t];if(n.strict===!0&&r<D[0])throw new Error(`${m} integer encoded in more bytes than necessary (strict decode)`);return r}function fe(e,t,n){ke(e,t,2);const r=e[t]<<8|e[t+1];if(n.strict===!0&&r<D[1])throw new Error(`${m} integer encoded in more bytes than necessary (strict decode)`);return r}function le(e,t,n){ke(e,t,4);const r=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(n.strict===!0&&r<D[2])throw new Error(`${m} integer encoded in more bytes than necessary (strict decode)`);return r}function de(e,t,n){ke(e,t,8);const r=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(r)<<BigInt(32))+BigInt(o);if(n.strict===!0&&i<D[3])throw new Error(`${m} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(n.allowBigInt===!0)return i;throw new Error(`${m} integers outside of the safe integer range are not supported`)}function kr(e,t,n,r){return new y(u.uint,ae(e,t+1,r),2)}function Ar(e,t,n,r){return new y(u.uint,fe(e,t+1,r),3)}function Sr(e,t,n,r){return new y(u.uint,le(e,t+1,r),5)}function Cr(e,t,n,r){return new y(u.uint,de(e,t+1,r),9)}function he(e,t){return H(e,0,t.value)}function H(e,t,n){if(n<D[0]){const r=Number(n);e.push([t|r])}else if(n<D[1]){const r=Number(n);e.push([t|24,r])}else if(n<D[2]){const r=Number(n);e.push([t|25,r>>>8,r&255])}else if(n<D[3]){const r=Number(n);e.push([t|26,r>>>24&255,r>>>16&255,r>>>8&255,r&255])}else{const r=BigInt(n);if(r<D[4]){const o=[t|27,0,0,0,0,0,0,0];let i=Number(r&BigInt(4294967295)),s=Number(r>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=s&255,s=s>>8,o[3]=s&255,s=s>>8,o[2]=s&255,s=s>>8,o[1]=s&255,e.push(o)}else throw new Error(`${m} encountered BigInt larger than allowable range`)}}he.encodedSize=function(t){return H.encodedSize(t.value)};H.encodedSize=function(t){return t<D[0]?1:t<D[1]?2:t<D[2]?3:t<D[3]?5:9};he.compareTokens=function(t,n){return t.value<n.value?-1:t.value>n.value?1:0};function Br(e,t,n,r){return new y(u.negint,-1-ae(e,t+1,r),2)}function $r(e,t,n,r){return new y(u.negint,-1-fe(e,t+1,r),3)}function Nr(e,t,n,r){return new y(u.negint,-1-le(e,t+1,r),5)}const Ot=BigInt(-1),$n=BigInt(1);function Ur(e,t,n,r){const o=de(e,t+1,r);if(typeof o!="bigint"){const i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new y(u.negint,i,9)}if(r.allowBigInt!==!0)throw new Error(`${m} integers outside of the safe integer range are not supported`);return new y(u.negint,Ot-BigInt(o),9)}function zt(e,t){const n=t.value,r=typeof n=="bigint"?n*Ot-$n:n*-1-1;H(e,t.type.majorEncoded,r)}zt.encodedSize=function(t){const n=t.value,r=typeof n=="bigint"?n*Ot-$n:n*-1-1;return r<D[0]?1:r<D[1]?2:r<D[2]?3:r<D[3]?5:9};zt.compareTokens=function(t,n){return t.value<n.value?1:t.value>n.value?-1:0};function De(e,t,n,r){ke(e,t,n+r);const o=It(e,t+n,t+n+r);return new y(u.bytes,o,n+r)}function Tr(e,t,n,r){return De(e,t,1,n)}function Ir(e,t,n,r){return De(e,t,2,ae(e,t+1,r))}function Or(e,t,n,r){return De(e,t,3,fe(e,t+1,r))}function zr(e,t,n,r){return De(e,t,5,le(e,t+1,r))}function Mr(e,t,n,r){const o=de(e,t+1,r);if(typeof o=="bigint")throw new Error(`${m} 64-bit integer bytes lengths not supported`);return De(e,t,9,o)}function Ze(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===u.string?mr(e.value):e.value),e.encodedBytes}function tt(e,t){const n=Ze(t);H(e,t.type.majorEncoded,n.length),e.push(n)}tt.encodedSize=function(t){const n=Ze(t);return H.encodedSize(n.length)+n.length};tt.compareTokens=function(t,n){return Dr(Ze(t),Ze(n))};function Dr(e,t){return e.length<t.length?-1:e.length>t.length?1:_r(e,t)}function je(e,t,n,r,o){const i=n+r;ke(e,t,i);const s=new y(u.string,wr(e,t+n,t+i),i);return o.retainStringBytes===!0&&(s.byteValue=It(e,t+n,t+i)),s}function jr(e,t,n,r){return je(e,t,1,n,r)}function Fr(e,t,n,r){return je(e,t,2,ae(e,t+1,r),r)}function Rr(e,t,n,r){return je(e,t,3,fe(e,t+1,r),r)}function Lr(e,t,n,r){return je(e,t,5,le(e,t+1,r),r)}function Vr(e,t,n,r){const o=de(e,t+1,r);if(typeof o=="bigint")throw new Error(`${m} 64-bit integer string lengths not supported`);return je(e,t,9,o,r)}const Pr=tt;function Ae(e,t,n,r){return new y(u.array,r,n)}function qr(e,t,n,r){return Ae(e,t,1,n)}function Gr(e,t,n,r){return Ae(e,t,2,ae(e,t+1,r))}function Hr(e,t,n,r){return Ae(e,t,3,fe(e,t+1,r))}function Kr(e,t,n,r){return Ae(e,t,5,le(e,t+1,r))}function Xr(e,t,n,r){const o=de(e,t+1,r);if(typeof o=="bigint")throw new Error(`${m} 64-bit integer array lengths not supported`);return Ae(e,t,9,o)}function Zr(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${m} indefinite length items not allowed`);return Ae(e,t,1,1/0)}function Mt(e,t){H(e,u.array.majorEncoded,t.value)}Mt.compareTokens=he.compareTokens;Mt.encodedSize=function(t){return H.encodedSize(t.value)};function Se(e,t,n,r){return new y(u.map,r,n)}function Jr(e,t,n,r){return Se(e,t,1,n)}function Yr(e,t,n,r){return Se(e,t,2,ae(e,t+1,r))}function Wr(e,t,n,r){return Se(e,t,3,fe(e,t+1,r))}function Qr(e,t,n,r){return Se(e,t,5,le(e,t+1,r))}function eo(e,t,n,r){const o=de(e,t+1,r);if(typeof o=="bigint")throw new Error(`${m} 64-bit integer map lengths not supported`);return Se(e,t,9,o)}function to(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${m} indefinite length items not allowed`);return Se(e,t,1,1/0)}function Dt(e,t){H(e,u.map.majorEncoded,t.value)}Dt.compareTokens=he.compareTokens;Dt.encodedSize=function(t){return H.encodedSize(t.value)};function no(e,t,n,r){return new y(u.tag,n,1)}function ro(e,t,n,r){return new y(u.tag,ae(e,t+1,r),2)}function oo(e,t,n,r){return new y(u.tag,fe(e,t+1,r),3)}function io(e,t,n,r){return new y(u.tag,le(e,t+1,r),5)}function so(e,t,n,r){return new y(u.tag,de(e,t+1,r),9)}function jt(e,t){H(e,u.tag.majorEncoded,t.value)}jt.compareTokens=he.compareTokens;jt.encodedSize=function(t){return H.encodedSize(t.value)};const co=20,uo=21,ao=22,fo=23;function lo(e,t,n,r){if(r.allowUndefined===!1)throw new Error(`${m} undefined values are not supported`);return r.coerceUndefinedToNull===!0?new y(u.null,null,1):new y(u.undefined,void 0,1)}function ho(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${m} indefinite length items not allowed`);return new y(u.break,void 0,1)}function Ft(e,t,n){if(n){if(n.allowNaN===!1&&Number.isNaN(e))throw new Error(`${m} NaN values are not supported`);if(n.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${m} Infinity values are not supported`)}return new y(u.float,e,t)}function po(e,t,n,r){return Ft(Lt(e,t+1),3,r)}function yo(e,t,n,r){return Ft(Vt(e,t+1),5,r)}function go(e,t,n,r){return Ft(In(e,t+1),9,r)}function Rt(e,t,n){const r=t.value;if(r===!1)e.push([u.float.majorEncoded|co]);else if(r===!0)e.push([u.float.majorEncoded|uo]);else if(r===null)e.push([u.float.majorEncoded|ao]);else if(r===void 0)e.push([u.float.majorEncoded|fo]);else{let o,i=!1;(!n||n.float64!==!0)&&(Un(r),o=Lt(K,1),r===o||Number.isNaN(r)?(K[0]=249,e.push(K.slice(0,3)),i=!0):(Tn(r),o=Vt(K,1),r===o&&(K[0]=250,e.push(K.slice(0,5)),i=!0))),i||(wo(r),o=In(K,1),K[0]=251,e.push(K.slice(0,9)))}}Rt.encodedSize=function(t,n){const r=t.value;if(r===!1||r===!0||r===null||r===void 0)return 1;if(!n||n.float64!==!0){Un(r);let o=Lt(K,1);if(r===o||Number.isNaN(r))return 3;if(Tn(r),o=Vt(K,1),r===o)return 5}return 9};const Nn=new ArrayBuffer(9),G=new DataView(Nn,1),K=new Uint8Array(Nn,0);function Un(e){if(e===1/0)G.setUint16(0,31744,!1);else if(e===-1/0)G.setUint16(0,64512,!1);else if(Number.isNaN(e))G.setUint16(0,32256,!1);else{G.setFloat32(0,e);const t=G.getUint32(0),n=(t&2139095040)>>23,r=t&8388607;if(n===255)G.setUint16(0,31744,!1);else if(n===0)G.setUint16(0,(e&2147483648)>>16|r>>13,!1);else{const o=n-127;o<-24?G.setUint16(0,0):o<-14?G.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):G.setUint16(0,(t&2147483648)>>16|o+15<<10|r>>13,!1)}}}function Lt(e,t){if(e.length-t<2)throw new Error(`${m} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(n===31744)return 1/0;if(n===64512)return-1/0;if(n===32256)return NaN;const r=n>>10&31,o=n&1023;let i;return r===0?i=o*2**-24:r!==31?i=(o+1024)*2**(r-25):i=o===0?1/0:NaN,n&32768?-i:i}function Tn(e){G.setFloat32(0,e,!1)}function Vt(e,t){if(e.length-t<4)throw new Error(`${m} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function wo(e){G.setFloat64(0,e,!1)}function In(e,t){if(e.length-t<8)throw new Error(`${m} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}Rt.compareTokens=he.compareTokens;function E(e,t,n){throw new Error(`${m} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function nt(e){return()=>{throw new Error(`${m} ${e}`)}}const a=[];for(let e=0;e<=23;e++)a[e]=E;a[24]=kr;a[25]=Ar;a[26]=Sr;a[27]=Cr;a[28]=E;a[29]=E;a[30]=E;a[31]=E;for(let e=32;e<=55;e++)a[e]=E;a[56]=Br;a[57]=$r;a[58]=Nr;a[59]=Ur;a[60]=E;a[61]=E;a[62]=E;a[63]=E;for(let e=64;e<=87;e++)a[e]=Tr;a[88]=Ir;a[89]=Or;a[90]=zr;a[91]=Mr;a[92]=E;a[93]=E;a[94]=E;a[95]=nt("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)a[e]=jr;a[120]=Fr;a[121]=Rr;a[122]=Lr;a[123]=Vr;a[124]=E;a[125]=E;a[126]=E;a[127]=nt("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)a[e]=qr;a[152]=Gr;a[153]=Hr;a[154]=Kr;a[155]=Xr;a[156]=E;a[157]=E;a[158]=E;a[159]=Zr;for(let e=160;e<=183;e++)a[e]=Jr;a[184]=Yr;a[185]=Wr;a[186]=Qr;a[187]=eo;a[188]=E;a[189]=E;a[190]=E;a[191]=to;for(let e=192;e<=215;e++)a[e]=no;a[216]=ro;a[217]=oo;a[218]=io;a[219]=so;a[220]=E;a[221]=E;a[222]=E;a[223]=E;for(let e=224;e<=243;e++)a[e]=nt("simple values are not supported");a[244]=E;a[245]=E;a[246]=E;a[247]=lo;a[248]=nt("simple values are not supported");a[249]=po;a[250]=yo;a[251]=go;a[252]=E;a[253]=E;a[254]=E;a[255]=ho;const J=[];for(let e=0;e<24;e++)J[e]=new y(u.uint,e,1);for(let e=-1;e>=-24;e--)J[31-e]=new y(u.negint,e,1);J[64]=new y(u.bytes,new Uint8Array(0),1);J[96]=new y(u.string,"",1);J[128]=new y(u.array,0,1);J[160]=new y(u.map,0,1);J[244]=new y(u.false,!1,1);J[245]=new y(u.true,!0,1);J[246]=new y(u.null,null,1);function mo(e){switch(e.type){case u.false:return W([244]);case u.true:return W([245]);case u.null:return W([246]);case u.bytes:return e.value.length?void 0:W([64]);case u.string:return e.value===""?W([96]):void 0;case u.array:return e.value===0?W([128]):void 0;case u.map:return e.value===0?W([160]):void 0;case u.uint:return e.value<24?W([Number(e.value)]):void 0;case u.negint:if(e.value>=-24)return W([31-Number(e.value)])}}const bo={float64:!1,mapSorter:vo,quickEncodeToken:mo};function xo(){const e=[];return e[u.uint.major]=he,e[u.negint.major]=zt,e[u.bytes.major]=tt,e[u.string.major]=Pr,e[u.array.major]=Mt,e[u.map.major]=Dt,e[u.tag.major]=jt,e[u.float.major]=Rt,e}const On=xo(),yt=new Cn;class Je{constructor(t,n){this.obj=t,this.parent=n}includes(t){let n=this;do if(n.obj===t)return!0;while(n=n.parent);return!1}static createCheck(t,n){if(t&&t.includes(n))throw new Error(`${Bn} object contains circular references`);return new Je(n,t)}}const ne={null:new y(u.null,null),undefined:new y(u.undefined,void 0),true:new y(u.true,!0),false:new y(u.false,!1),emptyArray:new y(u.array,0),emptyMap:new y(u.map,0)},ie={number(e,t,n,r){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new y(u.float,e):e>=0?new y(u.uint,e):new y(u.negint,e)},bigint(e,t,n,r){return e>=BigInt(0)?new y(u.uint,e):new y(u.negint,e)},Uint8Array(e,t,n,r){return new y(u.bytes,e)},string(e,t,n,r){return new y(u.string,e)},boolean(e,t,n,r){return e?ne.true:ne.false},null(e,t,n,r){return ne.null},undefined(e,t,n,r){return ne.undefined},ArrayBuffer(e,t,n,r){return new y(u.bytes,new Uint8Array(e))},DataView(e,t,n,r){return new y(u.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,n,r){if(!e.length)return n.addBreakTokens===!0?[ne.emptyArray,new y(u.break)]:ne.emptyArray;r=Je.createCheck(r,e);const o=[];let i=0;for(const s of e)o[i++]=Ge(s,n,r);return n.addBreakTokens?[new y(u.array,e.length),o,new y(u.break)]:[new y(u.array,e.length),o]},Object(e,t,n,r){const o=t!=="Object",i=o?e.keys():Object.keys(e),s=o?e.size:i.length;if(!s)return n.addBreakTokens===!0?[ne.emptyMap,new y(u.break)]:ne.emptyMap;r=Je.createCheck(r,e);const c=[];let d=0;for(const l of i)c[d++]=[Ge(l,n,r),Ge(o?e.get(l):e[l],n,r)];return _o(c,n),n.addBreakTokens?[new y(u.map,s),c,new y(u.break)]:[new y(u.map,s),c]}};ie.Map=ie.Object;ie.Buffer=ie.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))ie[`${e}Array`]=ie.DataView;function Ge(e,t={},n){const r=dr(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||ie[r];if(typeof o=="function"){const s=o(e,r,t,n);if(s!=null)return s}const i=ie[r];if(!i)throw new Error(`${Bn} unsupported type: ${r}`);return i(e,r,t,n)}function _o(e,t){t.mapSorter&&e.sort(t.mapSorter)}function vo(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],r=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==r.type)return n.type.compare(r.type);const o=n.type.major,i=On[o].compareTokens(n,r);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function zn(e,t,n,r){if(Array.isArray(t))for(const o of t)zn(e,o,n,r);else n[t.type.major](e,t,r)}function Eo(e,t,n){const r=Ge(e,n);if(!Array.isArray(r)&&n.quickEncodeToken){const o=n.quickEncodeToken(r);if(o)return o;const i=t[r.type.major];if(i.encodedSize){const s=i.encodedSize(r,n),c=new Cn(s);if(i(c,r,n),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return Sn(c.chunks[0])}}return yt.reset(),zn(yt,r,t,n),yt.toBytes(!0)}function ko(e,t){return t=Object.assign({},bo,t),Eo(e,On,t)}const Ao={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class So{constructor(t,n={}){this._pos=0,this.data=t,this.options=n}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let n=J[t];if(n===void 0){const r=a[t];if(!r)throw new Error(`${m} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const o=t&31;n=r(this.data,this._pos,o,this.options)}return this._pos+=n.encodedLength,n}}const Oe=Symbol.for("DONE"),rt=Symbol.for("BREAK");function Co(e,t,n){const r=[];for(let o=0;o<e.value;o++){const i=ze(t,n);if(i===rt){if(e.value===1/0)break;throw new Error(`${m} got unexpected break to lengthed array`)}if(i===Oe)throw new Error(`${m} found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=i}return r}function Bo(e,t,n){const r=n.useMaps===!0,o=r?void 0:{},i=r?new Map:void 0;for(let s=0;s<e.value;s++){const c=ze(t,n);if(c===rt){if(e.value===1/0)break;throw new Error(`${m} got unexpected break to lengthed map`)}if(c===Oe)throw new Error(`${m} found map but not enough entries (got ${s} [no key], expected ${e.value})`);if(r!==!0&&typeof c!="string")throw new Error(`${m} non-string keys not supported (got ${typeof c})`);if(n.rejectDuplicateMapKeys===!0&&(r&&i.has(c)||!r&&c in o))throw new Error(`${m} found repeat map key "${c}"`);const d=ze(t,n);if(d===Oe)throw new Error(`${m} found map but not enough entries (got ${s} [no value], expected ${e.value})`);r?i.set(c,d):o[c]=d}return r?i:o}function ze(e,t){if(e.done())return Oe;const n=e.next();if(n.type===u.break)return rt;if(n.type.terminal)return n.value;if(n.type===u.array)return Co(n,e,t);if(n.type===u.map)return Bo(n,e,t);if(n.type===u.tag){if(t.tags&&typeof t.tags[n.value]=="function"){const r=ze(e,t);return t.tags[n.value](r)}throw new Error(`${m} tag not supported (${n.value})`)}throw new Error("unsupported")}function $o(e,t){if(!(e instanceof Uint8Array))throw new Error(`${m} data to decode must be a Uint8Array`);t=Object.assign({},Ao,t);const n=t.tokenizer||new So(e,t),r=ze(n,t);if(r===Oe)throw new Error(`${m} did not find any content to decode`);if(r===rt)throw new Error(`${m} got unexpected break`);return[r,e.subarray(n.pos())]}function No(e,t){const[n,r]=$o(e,t);if(r.length>0)throw new Error(`${m} too many terminals, data makes no sense`);return n}function Uo(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}function Pt(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function To(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(n[s]!==255)throw new TypeError(i+" is ambiguous");n[s]=o}var c=e.length,d=e.charAt(0),l=Math.log(c)/Math.log(256),h=Math.log(256)/Math.log(c);function f(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var b=0,N=0,$=0,I=p.length;$!==I&&p[$]===0;)$++,b++;for(var j=(I-$)*h+1>>>0,U=new Uint8Array(j);$!==I;){for(var F=p[$],L=0,O=j-1;(F!==0||L<N)&&O!==-1;O--,L++)F+=256*U[O]>>>0,U[O]=F%c>>>0,F=F/c>>>0;if(F!==0)throw new Error("Non-zero carry");N=L,$++}for(var q=j-N;q!==j&&U[q]===0;)q++;for(var X=d.repeat(b);q<j;++q)X+=e.charAt(U[q]);return X}function g(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var b=0;if(p[b]!==" "){for(var N=0,$=0;p[b]===d;)N++,b++;for(var I=(p.length-b)*l+1>>>0,j=new Uint8Array(I);p[b];){var U=n[p.charCodeAt(b)];if(U===255)return;for(var F=0,L=I-1;(U!==0||F<$)&&L!==-1;L--,F++)U+=c*j[L]>>>0,j[L]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");$=F,b++}if(p[b]!==" "){for(var O=I-$;O!==I&&j[O]===0;)O++;for(var q=new Uint8Array(N+(I-O)),X=N;O!==I;)q[X++]=j[O++];return q}}}function B(p){var b=g(p);if(b)return b;throw new Error(`Non-${t} character`)}return{encode:f,decodeUnsafe:g,decode:B}}var Io=To,Oo=Io;class zo{constructor(t,n,r){x(this,"name");x(this,"prefix");x(this,"baseEncode");this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Mo{constructor(t,n,r){x(this,"name");x(this,"prefix");x(this,"baseDecode");x(this,"prefixCodePoint");if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Mn(this,t)}}class Do{constructor(t){x(this,"decoders");this.decoders=t}or(t){return Mn(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r!=null)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function Mn(e,t){return new Do({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class jo{constructor(t,n,r,o){x(this,"name");x(this,"prefix");x(this,"baseEncode");x(this,"baseDecode");x(this,"encoder");x(this,"decoder");this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=o,this.encoder=new zo(t,n,r),this.decoder=new Mo(t,n,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function Dn({name:e,prefix:t,encode:n,decode:r}){return new jo(e,t,n,r)}function jn({name:e,prefix:t,alphabet:n}){const{encode:r,decode:o}=Oo(n,e);return Dn({prefix:t,name:e,encode:r,decode:i=>Pt(o(i))})}function Fo(e,t,n,r){const o={};for(let h=0;h<t.length;++h)o[t[h]]=h;let i=e.length;for(;e[i-1]==="=";)--i;const s=new Uint8Array(i*n/8|0);let c=0,d=0,l=0;for(let h=0;h<i;++h){const f=o[e[h]];if(f===void 0)throw new SyntaxError(`Non-${r} character`);d=d<<n|f,c+=n,c>=8&&(c-=8,s[l++]=255&d>>c)}if(c>=n||255&d<<8-c)throw new SyntaxError("Unexpected end of data");return s}function Ro(e,t,n){const r=t[t.length-1]==="=",o=(1<<n)-1;let i="",s=0,c=0;for(let d=0;d<e.length;++d)for(c=c<<8|e[d],s+=8;s>n;)s-=n,i+=t[o&c>>s];if(s!==0&&(i+=t[o&c<<n-s]),r)for(;i.length*n&7;)i+="=";return i}function ee({name:e,prefix:t,bitsPerChar:n,alphabet:r}){return Dn({prefix:t,name:e,encode(o){return Ro(o,r,n)},decode(o){return Fo(o,r,n,e)}})}const He=ee({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});ee({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});ee({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});ee({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});ee({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});ee({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});ee({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});ee({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});ee({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const re=jn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});jn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Lo=Fn,sn=128,Vo=127,Po=~Vo,qo=Math.pow(2,31);function Fn(e,t,n){t=t||[],n=n||0;for(var r=n;e>=qo;)t[n++]=e&255|sn,e/=128;for(;e&Po;)t[n++]=e&255|sn,e>>>=7;return t[n]=e|0,Fn.bytes=n-r+1,t}var Go=xt,Ho=128,cn=127;function xt(e,r){var n=0,r=r||0,o=0,i=r,s,c=e.length;do{if(i>=c)throw xt.bytes=0,new RangeError("Could not decode varint");s=e[i++],n+=o<28?(s&cn)<<o:(s&cn)*Math.pow(2,o),o+=7}while(s>=Ho);return xt.bytes=i-r,n}var Ko=Math.pow(2,7),Xo=Math.pow(2,14),Zo=Math.pow(2,21),Jo=Math.pow(2,28),Yo=Math.pow(2,35),Wo=Math.pow(2,42),Qo=Math.pow(2,49),ei=Math.pow(2,56),ti=Math.pow(2,63),ni=function(e){return e<Ko?1:e<Xo?2:e<Zo?3:e<Jo?4:e<Yo?5:e<Wo?6:e<Qo?7:e<ei?8:e<ti?9:10},ri={encode:Lo,decode:Go,encodingLength:ni},Ye=ri;function _t(e,t=0){return[Ye.decode(e,t),Ye.decode.bytes]}function We(e,t,n=0){return Ye.encode(e,t,n),t}function Qe(e){return Ye.encodingLength(e)}function vt(e,t){const n=t.byteLength,r=Qe(e),o=r+Qe(n),i=new Uint8Array(o+n);return We(e,i,0),We(n,i,r),i.set(t,o),new qt(e,n,t,i)}function oi(e){const t=Pt(e),[n,r]=_t(t),[o,i]=_t(t.subarray(r)),s=t.subarray(r+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new qt(n,o,s,t)}function ii(e,t){if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&Uo(e.bytes,n.bytes)}}class qt{constructor(t,n,r,o){x(this,"code");x(this,"size");x(this,"digest");x(this,"bytes");this.code=t,this.size=n,this.digest=r,this.bytes=o}}function un(e,t){const{bytes:n,version:r}=e;switch(r){case 0:return ci(n,Et(e),t??re.encoder);default:return ui(n,Et(e),t??He.encoder)}}const an=new WeakMap;function Et(e){const t=an.get(e);if(t==null){const n=new Map;return an.set(e,n),n}return t}var yn;class S{constructor(t,n,r,o){x(this,"code");x(this,"version");x(this,"multihash");x(this,"bytes");x(this,"/");x(this,yn,"CID");this.code=n,this.version=t,this.multihash=r,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:n}=this;if(t!==$e)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==ai)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return S.createV0(n)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash,r=vt(t,n);return S.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return S.equals(this,t)}static equals(t,n){const r=n;return r!=null&&t.code===r.code&&t.version===r.version&&ii(t.multihash,r.multihash)}toString(t){return un(this,t)}toJSON(){return{"/":un(this)}}link(){return this}[(yn=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;const n=t;if(n instanceof S)return n;if(n["/"]!=null&&n["/"]===n.bytes||n.asCID===n){const{version:r,code:o,multihash:i,bytes:s}=n;return new S(r,o,i,s??fn(r,o,i.bytes))}else if(n[fi]===!0){const{version:r,multihash:o,code:i}=n,s=oi(o);return S.create(r,i,s)}else return null}static create(t,n,r){if(typeof n!="number")throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(n!==$e)throw new Error(`Version 0 CID must use dag-pb (code: ${$e}) block encoding`);return new S(t,n,r,r.bytes)}case 1:{const o=fn(t,n,r.bytes);return new S(t,n,r,o)}default:throw new Error("Invalid version")}}static createV0(t){return S.create(0,$e,t)}static createV1(t,n){return S.create(1,t,n)}static decode(t){const[n,r]=S.decodeFirst(t);if(r.length!==0)throw new Error("Incorrect length");return n}static decodeFirst(t){const n=S.inspectBytes(t),r=n.size-n.multihashSize,o=Pt(t.subarray(r,r+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");const i=o.subarray(n.multihashSize-n.digestSize),s=new qt(n.multihashCode,n.digestSize,i,o);return[n.version===0?S.createV0(s):S.createV1(n.codec,s),t.subarray(n.size)]}static inspectBytes(t){let n=0;const r=()=>{const[f,g]=_t(t.subarray(n));return n+=g,f};let o=r(),i=$e;if(o===18?(o=0,n=0):i=r(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const s=n,c=r(),d=r(),l=n+d,h=l-s;return{version:o,codec:i,multihashCode:c,digestSize:d,multihashSize:h,size:l}}static parse(t,n){const[r,o]=si(t,n),i=S.decode(o);if(i.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Et(i).set(r,t),i}}function si(e,t){switch(e[0]){case"Q":{const n=t??re;return[re.prefix,n.decode(`${re.prefix}${e}`)]}case re.prefix:{const n=t??re;return[re.prefix,n.decode(e)]}case He.prefix:{const n=t??He;return[He.prefix,n.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function ci(e,t,n){const{prefix:r}=n;if(r!==re.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=t.get(r);if(o==null){const i=n.encode(e).slice(1);return t.set(r,i),i}else return o}function ui(e,t,n){const{prefix:r}=n,o=t.get(r);if(o==null){const i=n.encode(e);return t.set(r,i),i}else return o}const $e=112,ai=18;function fn(e,t,n){const r=Qe(e),o=r+Qe(t),i=new Uint8Array(o+n.byteLength);return We(e,i,0),We(t,i,r),i.set(n,o),i}const fi=Symbol.for("@ipld/js-cid/CID"),Rn=42;function Ln(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function li(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=S.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new y(u.tag,Rn),new y(u.bytes,n)]}function di(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function hi(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const kt={float64:!0,typeEncoders:{Object:li,undefined:di,number:hi}},pi={...kt,typeEncoders:{...kt.typeEncoders}};function yi(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return S.decode(e.subarray(1))}const et={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};et.tags[Rn]=yi;const gi={...et,tags:et.tags.slice()},wi="dag-cbor",mi=113,bi=e=>ko(e,kt),Vn=e=>No(Ln(e),et),xi=Object.freeze(Object.defineProperty({__proto__:null,code:mi,decode:Vn,decodeOptions:gi,encode:bi,encodeOptions:pi,name:wi,toByteView:Ln},Symbol.toStringTag,{value:"Module"}));function _i({name:e,code:t,encode:n}){return new vi(e,t,n)}class vi{constructor(t,n,r){x(this,"name");x(this,"code");x(this,"encode");this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?vt(this.code,n):n.then(r=>vt(this.code,r))}else throw Error("Unknown type, must be binary type")}}function Ve({enumerable:e=!0,configurable:t=!1}={}){return{enumerable:e,configurable:t,writable:!1}}function*Ei(e,t){if(t!=null&&typeof t=="object")if(Array.isArray(t))for(const[n,r]of t.entries()){const o=[...e,n],i=S.asCID(r);i!=null?yield[o.join("/"),i]:typeof r=="object"&&(yield*At(r,o))}else{const n=S.asCID(t);n!=null?yield[e.join("/"),n]:yield*At(t,e)}}function*At(e,t){if(e==null||e instanceof Uint8Array)return;const n=S.asCID(e);n!=null&&(yield[t.join("/"),n]);for(const[r,o]of Object.entries(e)){const i=[...t,r];yield*Ei(i,o)}}function*ki(e,t){if(Array.isArray(t))for(const[n,r]of t.entries()){const o=[...e,n];yield o.join("/"),typeof r=="object"&&S.asCID(r)==null&&(yield*St(r,o))}else yield*St(t,e)}function*St(e,t){if(!(e==null||typeof e!="object"))for(const[n,r]of Object.entries(e)){const o=[...t,n];yield o.join("/"),r!=null&&!(r instanceof Uint8Array)&&typeof r=="object"&&S.asCID(r)==null&&(yield*ki(o,r))}}function Ai(e,t){let n=e;for(const[r,o]of t.entries()){if(n=n[o],n==null)throw new Error(`Object has no property at ${t.slice(0,r+1).map(s=>`[${JSON.stringify(s)}]`).join("")}`);const i=S.asCID(n);if(i!=null)return{value:i,remaining:t.slice(r+1).join("/")}}return{value:n}}class Si{constructor({cid:t,bytes:n,value:r}){x(this,"cid");x(this,"bytes");x(this,"value");x(this,"asBlock");if(t==null||n==null||typeof r>"u")throw new Error("Missing required argument");this.cid=t,this.bytes=n,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:Ve(),bytes:Ve(),value:Ve(),asBlock:Ve()})}links(){return At(this.value,[])}tree(){return St(this.value,[])}get(t="/"){return Ai(this.value,t.split("/").filter(Boolean))}}async function Ci({value:e,codec:t,hasher:n}){if(typeof e>"u")throw new Error('Missing required argument "value"');if(t==null||n==null)throw new Error("Missing required argument: codec or hasher");const r=t.encode(e),o=await n.digest(r),i=S.create(1,t.code,o);return new Si({value:e,bytes:r,cid:i})}function Bi(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const $i=_i({name:"sha2-256",code:18,encode:Bi("SHA-256")});/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const z=2n**255n-19n,Te=2n**252n+27742317777372353535851937790883648493n,Ct=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Bt=0x6666666666666666666666666666666666666666666666666666666666666658n,Pe={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,p:z,n:Te,h:8,Gx:Ct,Gy:Bt},V=(e="")=>{throw new Error(e)},Pn=e=>typeof e=="string",Gt=(e,t)=>!(e instanceof Uint8Array)||typeof t=="number"&&t>0&&e.length!==t?V("Uint8Array expected"):e,_e=e=>new Uint8Array(e),$t=(e,t)=>Gt(Pn(e)?Kt(e):_e(e),t),w=(e,t=z)=>{let n=e%t;return n>=0n?n:t+n},ln=e=>e instanceof P?e:V("Point expected");let dn;class P{constructor(t,n,r,o){this.ex=t,this.ey=n,this.ez=r,this.et=o}static fromAffine(t){return new P(t.x,t.y,1n,w(t.x*t.y))}static fromHex(t,n=!0){const{d:r}=Pe;t=$t(t,32);const o=t.slice();o[31]=t[31]&-129;const i=Xt(o);i===0n||(n&&!(0n<i&&i<z)&&V("bad y coord 1"),!n&&!(0n<i&&i<2n**256n)&&V("bad y coord 2"));const s=w(i*i),c=w(s-1n),d=w(r*s+1n);let{isValid:l,value:h}=Ti(c,d);l||V("bad y coordinate 3");const f=(h&1n)===1n;return(t[31]&128)!==0!==f&&(h=w(-h)),new P(h,i,1n,w(h*i))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(t){const{ex:n,ey:r,ez:o}=this,{ex:i,ey:s,ez:c}=ln(t),d=w(n*c),l=w(i*o),h=w(r*c),f=w(s*o);return d===l&&h===f}is0(){return this.equals(Ke)}negate(){return new P(w(-this.ex),this.ey,this.ez,w(-this.et))}double(){const{ex:t,ey:n,ez:r}=this,{a:o}=Pe,i=w(t*t),s=w(n*n),c=w(2n*w(r*r)),d=w(o*i),l=t+n,h=w(w(l*l)-i-s),f=d+s,g=f-c,B=d-s,p=w(h*g),b=w(f*B),N=w(h*B),$=w(g*f);return new P(p,b,$,N)}add(t){const{ex:n,ey:r,ez:o,et:i}=this,{ex:s,ey:c,ez:d,et:l}=ln(t),{a:h,d:f}=Pe,g=w(n*s),B=w(r*c),p=w(i*f*l),b=w(o*d),N=w((n+r)*(s+c)-g-B),$=w(b-p),I=w(b+p),j=w(B-h*g),U=w(N*$),F=w(I*j),L=w(N*j),O=w($*I);return new P(U,F,O,L)}mul(t,n=!0){if(t===0n)return n===!0?V("cannot multiply by 0"):Ke;if(typeof t=="bigint"&&0n<t&&t<Te||V("invalid scalar, must be < L"),!n&&this.is0()||t===1n)return this;if(this.equals(Me))return Fi(t).p;let r=Ke,o=Me;for(let i=this;t>0n;i=i.double(),t>>=1n)t&1n?r=r.add(i):n&&(o=o.add(i));return r}multiply(t){return this.mul(t)}clearCofactor(){return this.mul(BigInt(Pe.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let t=this.mul(Te/2n,!1).double();return Te%2n&&(t=t.add(this)),t.is0()}toAffine(){const{ex:t,ey:n,ez:r}=this;if(this.is0())return{x:0n,y:0n};const o=Gn(r);return w(r*o)!==1n&&V("invalid inverse"),{x:w(t*o),y:w(n*o)}}toRawBytes(){const{x:t,y:n}=this.toAffine(),r=Ni(n);return r[31]|=t&1n?128:0,r}toHex(){return Ht(this.toRawBytes())}}P.BASE=new P(Ct,Bt,1n,w(Ct*Bt));P.ZERO=new P(0n,1n,1n,0n);const{BASE:Me,ZERO:Ke}=P,qn=(e,t)=>e.toString(16).padStart(t,"0"),Ht=e=>Array.from(e).map(t=>qn(t,2)).join(""),Kt=e=>{const t=e.length;(!Pn(e)||t%2)&&V("hex invalid 1");const n=_e(t/2);for(let r=0;r<n.length;r++){const o=r*2,i=e.slice(o,o+2),s=Number.parseInt(i,16);(Number.isNaN(s)||s<0)&&V("hex invalid 2"),n[r]=s}return n},Ni=e=>Kt(qn(e,32*2)).reverse(),Xt=e=>BigInt("0x"+Ht(_e(Gt(e)).reverse())),Nt=(...e)=>{const t=_e(e.reduce((r,o)=>r+Gt(o).length,0));let n=0;return e.forEach(r=>{t.set(r,n),n+=r.length}),t},Gn=(e,t=z)=>{(e===0n||t<=0n)&&V("no inverse n="+e+" mod="+t);let n=w(e,t),r=t,o=0n,i=1n;for(;n!==0n;){const s=r/n,c=r%n,d=o-i*s;r=n,n=c,o=i,i=d}return r===1n?w(o,t):V("no inverse")},Z=(e,t)=>{let n=e;for(;t-- >0n;)n*=n,n%=z;return n},Ui=e=>{const n=e*e%z*e%z,r=Z(n,2n)*n%z,o=Z(r,1n)*e%z,i=Z(o,5n)*o%z,s=Z(i,10n)*i%z,c=Z(s,20n)*s%z,d=Z(c,40n)*c%z,l=Z(d,80n)*d%z,h=Z(l,80n)*d%z,f=Z(h,10n)*i%z;return{pow_p_5_8:Z(f,2n)*e%z,b2:n}},hn=19681161376707505956807079304988542015446066515923890162744021073123829784752n,Ti=(e,t)=>{const n=w(t*t*t),r=w(n*n*t),o=Ui(e*r).pow_p_5_8;let i=w(e*n*o);const s=w(t*i*i),c=i,d=w(i*hn),l=s===e,h=s===w(-e),f=s===w(-e*hn);return l&&(i=c),(h||f)&&(i=d),(w(i)&1n)===1n&&(i=w(-i)),{isValid:l||h,value:i}},Ii=e=>w(Xt(e),Te);let gt;const Oi=(...e)=>Hn.sha512Async(...e);function zi(e,t){return Oi(t.hashable).then(t.finish)}const Mi=(e,t,n)=>{t=$t(t),e=$t(e,64);const r=P.fromHex(n,!1),o=P.fromHex(e.slice(0,32),!1),i=Xt(e.slice(32,64)),s=Me.mul(i,!1);return{hashable:Nt(o.toRawBytes(),r.toRawBytes(),t),finish:l=>{const h=Ii(l);return o.add(r.mul(h,!1)).add(s.negate()).clearCofactor().is0()}}},Di=async(e,t,n)=>zi(!0,Mi(e,t,n)),pn=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,Hn={bytesToHex:Ht,hexToBytes:Kt,concatBytes:Nt,mod:w,invert:Gn,randomBytes:e=>{const t=pn();return t||V("crypto.getRandomValues must be defined"),t.getRandomValues(_e(e))},sha512Async:async(...e)=>{const t=pn();t||V("crypto.subtle or etc.sha512Async must be defined");const n=Nt(...e);return _e(await t.subtle.digest("SHA-512",n.buffer))},sha512Sync:void 0};Object.defineProperties(Hn,{sha512Sync:{configurable:!1,get(){return gt},set(e){gt||(gt=e)}}});const se=8,ji=()=>{const e=[],t=256/se+1;let n=Me,r=n;for(let o=0;o<t;o++){r=n,e.push(r);for(let i=1;i<2**(se-1);i++)r=r.add(n),e.push(r);n=r.double()}return e},Fi=e=>{const t=dn||(dn=ji()),n=(h,f)=>{let g=f.negate();return h?g:f};let r=Ke,o=Me;const i=1+256/se,s=2**(se-1),c=BigInt(2**se-1),d=2**se,l=BigInt(se);for(let h=0;h<i;h++){const f=h*s;let g=Number(e&c);e>>=l,g>s&&(g-=d,e+=1n);const B=f,p=f+Math.abs(g)-1,b=h%2!==0,N=g<0;g===0?o=o.add(n(b,t[B])):r=r.add(n(N,t[p]))}return{p:r,f:o}};function Ri(e){let t,n,r,o,i,s,c,d,l,h;const f=[Pi,Vi],g=[];function B(p,b){return p[1]!=null?0:1}return o=B(e),i=g[o]=f[o](e),{c(){t=_("hr"),n=M(),r=_("article"),i.c(),s=M(),c=_("button"),c.textContent="Check another"},m(p,b){C(p,t,b),C(p,n,b),C(p,r,b),g[o].m(r,null),C(p,s,b),C(p,c,b),d=!0,l||(h=Ne(c,"click",e[4]),l=!0)},p(p,b){let N=o;o=B(p),o===N?g[o].p(p,b):(xn(),xe(g[N],1,1,()=>{g[N]=null}),_n(),i=g[o],i?i.p(p,b):(i=g[o]=f[o](p),i.c()),ue(i,1),i.m(r,null))},i(p){d||(ue(i),d=!0)},o(p){xe(i),d=!1},d(p){p&&(k(t),k(n),k(r),k(s),k(c)),g[o].d(),l=!1,h()}}}function Li(e){let t,n,r,o,i;return o=new An({}),o.$on("fileUpload",e[3]),{c(){t=_("p"),t.textContent="Upload a Verifiable Credentials file to verify",n=M(),r=_("div"),vn(o.$$.fragment),T(t,"class","center svelte-pnipbk"),T(r,"id","upload-vc"),T(r,"class","svelte-pnipbk")},m(s,c){C(s,t,c),C(s,n,c),C(s,r,c),Ut(o,r,null),i=!0},p:Q,i(s){i||(ue(o.$$.fragment,s),i=!0)},o(s){xe(o.$$.fragment,s),i=!1},d(s){s&&(k(t),k(n),k(r)),Tt(o)}}}function Vi(e){let t,n,r,o,i,s,c,d,l=e[2].attr+"",h,f,g,B,p=JSON.stringify(e[2].val)+"",b,N,$,I,j,U,F,L=e[2].pubKey+"",O,q,X,ot,Zt,it,st,Fe=e[2].ts+"",ct,Jt,Ce,ut,Yt,at,ft,Re=e[2].fileCid+"",lt,dt,Be,ht,pe,ye,Y;function Wt(A,R){return A[2].goodSig===!0?Gi:qi}let Le=Wt(e),te=Le(e);return ye=new An({}),{c(){te.c(),t=M(),n=_("p"),n.textContent="Details:",r=M(),o=_("div"),i=_("table"),s=_("tbody"),c=_("tr"),d=_("td"),h=oe(l),f=M(),g=_("td"),B=_("code"),b=oe(p),N=M(),$=_("tr"),I=_("td"),I.textContent="Signer",j=M(),U=_("td"),F=_("code"),O=oe(L),q=M(),X=_("tr"),ot=_("td"),ot.textContent="Time",Zt=M(),it=_("td"),st=_("code"),ct=oe(Fe),Jt=M(),Ce=_("tr"),ut=_("td"),ut.textContent="Media",Yt=M(),at=_("td"),ft=_("code"),lt=oe(Re),dt=M(),Be=_("p"),Be.textContent="Upload a file to see if it matches this claim:",ht=M(),pe=_("div"),vn(ye.$$.fragment),T(i,"class","striped"),T(o,"class","overflow-auto"),T(Be,"class","center svelte-pnipbk"),T(pe,"id","upload-media"),T(pe,"class","svelte-pnipbk")},m(A,R){te.m(A,R),C(A,t,R),C(A,n,R),C(A,r,R),C(A,o,R),v(o,i),v(i,s),v(s,c),v(c,d),v(d,h),v(c,f),v(c,g),v(g,B),v(B,b),v(s,N),v(s,$),v($,I),v($,j),v($,U),v(U,F),v(F,O),v(s,q),v(s,X),v(X,ot),v(X,Zt),v(X,it),v(it,st),v(st,ct),v(s,Jt),v(s,Ce),v(Ce,ut),v(Ce,Yt),v(Ce,at),v(at,ft),v(ft,lt),C(A,dt,R),C(A,Be,R),C(A,ht,R),C(A,pe,R),Ut(ye,pe,null),Y=!0},p(A,R){Le!==(Le=Wt(A))&&(te.d(1),te=Le(A),te&&(te.c(),te.m(t.parentNode,t))),(!Y||R&4)&&l!==(l=A[2].attr+"")&&we(h,l),(!Y||R&4)&&p!==(p=JSON.stringify(A[2].val)+"")&&we(b,p),(!Y||R&4)&&L!==(L=A[2].pubKey+"")&&we(O,L),(!Y||R&4)&&Fe!==(Fe=A[2].ts+"")&&we(ct,Fe),(!Y||R&4)&&Re!==(Re=A[2].fileCid+"")&&we(lt,Re)},i(A){Y||(ue(ye.$$.fragment,A),Y=!0)},o(A){xe(ye.$$.fragment,A),Y=!1},d(A){A&&(k(t),k(n),k(r),k(o),k(dt),k(Be),k(ht),k(pe)),te.d(A),Tt(ye)}}}function Pi(e){let t,n,r;return{c(){t=_("p"),n=oe("Couldn't verify your file: "),r=oe(e[1]),T(t,"class","center svelte-pnipbk")},m(o,i){C(o,t,i),v(t,n),v(t,r)},p(o,i){i&2&&we(r,o[1])},i:Q,o:Q,d(o){o&&k(t)}}}function qi(e){let t;return{c(){t=_("h2"),t.textContent="Invalid signature ",T(t,"class","svelte-pnipbk")},m(n,r){C(n,t,r)},d(n){n&&k(t)}}}function Gi(e){let t;return{c(){t=_("h2"),t.textContent="Valid signature ",T(t,"class","svelte-pnipbk")},m(n,r){C(n,t,r)},d(n){n&&k(t)}}}function Hi(e){let t,n,r,o,i,s,c;const d=[Li,Ri],l=[];function h(f,g){return f[0]==="home"?0:f[0]==="verify"?1:-1}return~(r=h(e))&&(o=l[r]=d[r](e)),{c(){t=_("h1"),t.textContent="Authenticated Attributes Verifier",n=M(),o&&o.c(),i=M(),s=_("footer"),s.innerHTML="<hr/> <p>Starling Lab blah blah</p>",T(t,"class","svelte-pnipbk"),T(s,"class","svelte-pnipbk")},m(f,g){C(f,t,g),C(f,n,g),~r&&l[r].m(f,g),C(f,i,g),C(f,s,g),c=!0},p(f,[g]){let B=r;r=h(f),r===B?~r&&l[r].p(f,g):(o&&(xn(),xe(l[B],1,1,()=>{l[B]=null}),_n()),~r?(o=l[r],o?o.p(f,g):(o=l[r]=d[r](f),o.c()),ue(o,1),o.m(i.parentNode,i)):o=null)},i(f){c||(ue(o),c=!0)},o(f){xe(o),c=!1},d(f){f&&(k(t),k(n),k(i),k(s)),~r&&l[r].d(f)}}}function wt(e){const t=atob(e);return Uint8Array.from(t,n=>n.codePointAt(0))}function Ki(e,t,n){let r="home",o,i,s,c={goodSig:null,val:"",attr:"",pubKey:"",isEncrypted:!1,fileCid:null,ts:""};async function d(f){const g=new FileReader;g.addEventListener("load",async()=>{o=g.result,await l(),n(0,r="verify")},!1),g.readAsText(f.detail.file)}async function l(){try{if(i=JSON.parse(o),JSON.stringify(i["@context"])!=JSON.stringify(["https://www.w3.org/2018/credentials/v1","urn:authattr:vc-schema:1"])){n(1,s="Not a VC, or using unknown schema");return}if(i.proof.type!="authattr_ed25519_v1"){n(1,s="unknown VC proof type");return}if(i.proof.pubKey!=i.issuer.substring(20)){n(1,s="proof public key and issuer don't match");return}switch(n(2,c.attr=i.credentialSubject.attribute,c),n(2,c.ts=i.issuanceDate,c),n(2,c.fileCid=S.parse(i.credentialSubject.id.substring(8)),c),n(2,c.pubKey=i.proof.pubKey,c),i.credentialSubject.encoding){case"json":n(2,c.val=i.credentialSubject.value,c);break;case"base64_dag-cbor":n(2,c.val=Vn(wt(i.credentialSubject.value)),c);break;case"base64_encrypted_dag-cbor":n(2,c.isEncrypted=!0,c);break;default:n(1,s="unknown value encoding type");return}const f={};f.CID=c.fileCid,f.value=c.val,f.attribute=c.attr,f.encrypted=c.isEncrypted,f.timestamp=c.ts,console.log(f);const g=await Ci({value:f,codec:xi,hasher:$i});if(g.cid.toString()!=i.id.substring(8)){n(1,s="calculated attestation CID doesn't match VC id");return}n(2,c.goodSig=await Di(wt(i.proof.sig),g.cid.bytes,wt(c.pubKey)),c)}catch(f){console.log(f),n(1,s=f)}}return[r,s,c,d,()=>{n(0,r="home"),n(1,s=null)}]}class Xi extends kn{constructor(t){super(),En(this,t,Ki,Hi,mn,{})}}new Xi({target:document.getElementById("app")});
